### 前言

网上的对线程池源码的分析太多了，这里就不说原理了。直接参考他写一个简单的线程池吧。

```code

public void execute(Runnable command){
        if(command==null)
        throw new NullPointerException();

        int c=ctl.get();
        if(workerCountOf(c)<corePoolSize){
        if(addWorker(command,true))
        return;
        c=ctl.get();
        }
        
        
        
        //offer如果可以在不超过队列的容量的情况下立即将其指定的元素插入到队列的尾部，
        //如果队列已满，则返回false。
        //isRunning 在是否是运行的状态
        if(isRunning(c)&&workQueue.offer(command)){
        int recheck=ctl.get();
        if(!isRunning(recheck)&&remove(command))
        reject(command);
        else if(workerCountOf(recheck)==0)
        addWorker(null,false);
        }
        //尝试添加到等待工作队列。如果 worker（HashSet<Worker>） 已满，就拒绝它。
        else if(!addWorker(command,false))
        reject(command);
        }

```
